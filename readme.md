
# Laravel Extension Pack

[![Build Status](https://travis-ci.org/jumilla/laravel-extension.svg)](https://travis-ci.org/jumilla/laravel-extension)
[![Quality Score](https://img.shields.io/scrutinizer/g/jumilla/laravel-extension.svg?style=flat)](https://scrutinizer-ci.com/g/jumilla/laravel-extension)
[![Code Coverage](https://scrutinizer-ci.com/g/jumilla/laravel-extension/badges/coverage.png?b=master)](https://scrutinizer-ci.com/g/jumilla/laravel-extension/)
[![Latest Stable Version](https://poser.pugx.org/laravel-plus/extension/v/stable.svg)](https://packagist.org/packages/laravel-plus/extension)
[![Total Downloads](https://poser.pugx.org/laravel-plus/extension/d/total.svg)](https://packagist.org/packages/laravel-plus/extension)
[![Software License](https://poser.pugx.org/laravel-plus/extension/license.svg)](https://packagist.org/packages/laravel-plus/extension)

[日本語ドキュメント - Japanese](readme-ja.md)

## Features

* Additional version-based migration features
	* It adopted a semantic version based database migration library. [Laravel Versionia](http://github.com/jumilla/laravel-versionia) has been included.
	* Migration & seed class, have been incorporated into the directory structure of Laravel 5.
	* You can now specify a group to migration.
	* Now the name is attached to the seed.
	* Designation of the version, in the class `App/Providers/DatabaseServiceProvider`.
	* You can use as is the migration & seed class of Laravel.

* Additional add-on features
	* It is a package feature in the application. You can use the image to replicate the directory structure of Laravel 5.
	* By default, it will be placed under the 'addons' directory.
	* You can make one have its own name space (PSR-4) to add-on.
	* It can serve as a package of Laravel 5. Valid namespace notation `{addon-name}::` can be used 'lang', 'view'. Also can use 'config'.
	* Only additional add-on to copy the directory. You do not need to add code to the configuration file, such as 'config/app.php'.
	* 7 types of stationery and offers two types of sample. Can be generated by artisan command `php artisan make:addon`.

* Commands of file generation
	* The class of Laravel 5 that can be generated from the command line, such as Console command, Job, Provider, ...
	* The generator command can also be used a customized stub file.
	* Compliance with Laravel 5 command of `make:xxx`. Command names and options are the same.
	* In `--addon` option, you can also generate a file in the add-on.

* Solution of a facade problem in the namespace
	* A facade can be used in the class with a name space under the app directory. (A backslash and a use declaration, unnecessary)
	* A facade can also be handled by the same description method from the inside in add-on name space.

## How to install

### [A] The Laravel project which is already included is downloaded.

```sh
composer create-project laravel-plus/laravel5 <project-name>
```

### [B] It's installed in a project of existence.

#### 1. Add the package `laravel-plus/extension` use Composer.

Use composer.

```sh
composer require laravel-plus/extension
```

#### 2. Add the service provider.

Edit file `config/app.php`.

```php
	'providers' => [
		'Illuminate\Foundation\Providers\ArtisanServiceProvider',
		...
		// Add the folloing line.
		'LaravelPlus\Extension\ServiceProvider',
	],
```

#### 3. Set the base class of the class `App\Console\Kernel`.

Open the **app/Console/Kernel.php** file, Change `use Illuminate\Foundation\Console\Kernel as ConsoleKernel;` line to the following.

```php
use LaravelPlus\Extension\ConsoleKernel as ConsoleKernel;

class Kernel extends ConsoleKernel
{
}
```

#### 4. Set the base class of the class `App\Http\Kernel`.

Open the **app/Http/Kernel.php** file, Change `use Illuminate\Foundation\Http\Kernel as HttpKernel;` line to the following.

```php
use LaravelPlus\Extension\HttpKernel as HttpKernel;

class Kernel extends HttpKernel
{
}
```

## Check for running

Add-on `wiki` is made as a example.

```sh
php artisan make:addon wiki sample:ui
```

Please confirm the routing setting.

```sh
php artisan route:list
```

A local server is started and accesses `http://localhost:8000/addons/wiki` by a browser.
When a package name is indicated, it's success.

```sh
php artisan serve
```

## Commands

### `addon:status`

The add-on state can be confirmed.

```sh
php artisan addon:status
```

When `addons` directory and `app/config/addon.php` file don't exist, it's made.

### `make:addon`

An add-on is made.
I add on the next command  `blog` is generated as PHP name spatial `Blog` using a form of `ui`-type.

```sh
php artisan make:addon blog ui
```

A skeleton can be chosen from 9 kinds.

* `minimum` - Minimum structure.
* `simple` - The simple construction with the `views` directory and the `route.php`.
* `library` - The composition to which a PHP range and a database are offered.
* `api` - The structure for API.
* `ui` - Full-set including UI.
* `debug` - The add-on in which program testing facility is put. Service provider registration of `debug-bar` is also included.
* `laravel5` - The directory structure of Laravel 5.
* `sample:ui` - Example of a UI add-on.
* `sample:auth` - The authentication sample included in Laravel 5.

When not designating a form by a command argument, it can be chosen by an interactive mode.

```sh
php artisan make:addon blog
```

PHP namespace can designate `--namespace` by an option.
Please use `\\` or `/` for a namespace separate.

```sh
php artisan make:addon blog --namespace App\\Blog
php artisan make:addon blog --namespace App/Blog
```

### `addon:name`

A file in the add-on is scanned and the PHP namespace is changed.

```sh
php artisan addon:name blog Wonderful/Blog
```

When you'd like to confirm the scanned file, please designate `-v` option.

```sh
php artisan addon:name blog Sugoi/Blog -v
```

### `addon:remove`

An add-on is eliminated.

```sh
php artisan addon:remove blog;
```

`addons/blog`  A directory is just eliminated.

### `database:status`

Migration, seed's definition and installation state are indicated.

```sh
php artisan database:status
```

### `database:upgrade`

`up()` method in migration of all groups, it's carried out and it's made a newest version.

```sh
php artisan database:upgrade
```

It's possible to make them seed after my gray-tion.

```sh
php artisan database:upgrade --seed <seed>
```

### `database:clean`

`down()` method in migration of all groups, , it's carried out and it's returned in the clean state.

```sh
php artisan database:clean
```

### `database:refresh`

Re-run migration of all groups.

After `database:clean` and `database:upgrade` were carried out, same.

```sh
php artisan database:refresh
```

It's possible to make them seed after migration.

```sh
php artisan database:refresh --seed <seed>
```

### `database:rollback`

The version of the specified group is returned one.

```sh
php artisan database:rollback <group>
```

When `--all` option is put, everything's version of the designation group is eliminated.

```sh
php artisan database:rollback <group> --all
```

### `database:again`

A newest version of a specified group is made.

I have the same effect as the time when `database:rollback <group>` and `database:upgrade` were carried out.

```sh
php artisan database:again <group>
```

It's possible to make them seed after migration.

```sh
php artisan database:again <group> --seed <seed>
```

### `database:seed`

Run specified seed.

```sh
php artisan database:seed <seed>
```

When omitting `<seed>`, run default seed.

```sh
php artisan database:seed
```

## Facade expansion

I have to put `\` on the head of the class name to handle a facade from the inside in namespace because an alias loader of Laravel 5 acts on only global namespace.

```
function index()
{
	return \View::make()
}
```

Or a use declaration is used.

```
use View;

...

function index()
{
	return View::make()
}
```

Laravel Extension has the alias loader which settles a facade in the namespace in the add-on bottom, so a way of Laravel 4.2 formula document mentioning can be used just as it is.

```
function index()
{
	return View::make()
}
```

## Bootstrap behavior

* Require `files` entry in file `addons/{addon-name}/addon.json`.
* Sees `namespace` entry in file `addons/{addon-name}/addon.php` and establishes class automatic threading based on PSR-4 agreement to all directories specified as `directories`.

## Author

古川 文生 / Fumio Furukawa (fumio@jumilla.me)

## License

MIT
